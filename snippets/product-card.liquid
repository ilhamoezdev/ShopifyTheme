<div class="card product-card mb-4">
  <a href="{{ product.url }}" class="text-decoration-none">
    <div class="position-relative">
      {% if product.featured_image != blank %}
        <img
          srcset="{%- if product.featured_image.width >= 375 -%}{{ product.featured_image | image_url: width: 375 }} 375w,{%- endif -%}
                  {%- if product.featured_image.width >= 750 -%}{{ product.featured_image | image_url: width: 750 }} 750w,{%- endif -%}
                  {%- if product.featured_image.width >= 1100 -%}{{ product.featured_image | image_url: width: 1100 }} 1100w,{%- endif -%}
                  {{ product.featured_image | image_url }} {{ product.featured_image.width }}w"
          src="{{ product.featured_image | image_url: width: 750 }}"
          sizes="(min-width: 990px) 1100px, (min-width: 750px) 750px, 375px"
          alt="{{ product.featured_image.alt | escape }}"
          loading="lazy"
          width="{{ product.featured_image.width }}"
          height="{{ product.featured_image.height }}"
          class="card-img-top"
        >
      {% else %}
        <div class="card-img-top bg-gradient d-flex align-items-center justify-content-center" style="aspect-ratio: 1; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);">
          <div class="text-center">
            <div class="bg-accent rounded-circle d-flex align-items-center justify-content-center mx-auto mb-2 shadow-gold" style="width: 64px; height: 64px;">
              <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24" class="text-dark">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
            </div>
            <div class="fw-semibold text-dark">Premium Baklava</div>
          </div>
        </div>
      {% endif %}

      {% unless product.available %}
        <span class="badge bg-danger position-absolute top-0 end-0 m-3">Sold Out</span>
      {% endunless %}

      {% if product.compare_at_price > product.price %}
        <span class="badge bg-accent text-dark position-absolute top-0 start-0 m-3">Premium</span>
      {% endif %}

      <div class="position-absolute top-0 end-0 bg-accent opacity-20 rounded-circle d-flex align-items-center justify-content-center m-3 opacity-0 product-card-hover" style="width: 32px; height: 32px; transition: opacity 0.3s;">
        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" class="text-accent">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
      </div>
    </div>
  </a>

  <div class="card-body d-flex flex-column">
    <a href="{{ product.url }}" class="text-decoration-none">
      <h5 class="card-title">{{ product.title }}</h5>
    </a>

    <div class="d-flex align-items-center gap-2 mb-3">
      <span class="product-price">{{ product.price | money }}</span>
      {% if product.compare_at_price > product.price %}
        <span class="text-muted text-decoration-line-through small">{{ product.compare_at_price | money }}</span>
      {% endif %}
    </div>

    <form action="{{ routes.cart_add_url }}" method="post" enctype="multipart/form-data" class="mt-auto">
      <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
      <button
        type="submit"
        name="add"
        class="btn btn-accent w-100"
        {% unless product.available %}disabled{% endunless %}
      >
        {% if product.available %}
          Add to Cart
        {% else %}
          Sold Out
        {% endif %}
      </button>
    </form>

    <!-- Product Highlights -->
    <div class="d-flex justify-content-center gap-3 mt-3 pt-3 border-top border-light">
      <div class="text-center">
        <div class="bg-pistachio rounded-circle mx-auto mb-1" style="width: 24px; height: 24px;"></div>
        <div class="small text-muted fw-medium">Premium</div>
      </div>
      <div class="text-center">
        <div class="bg-accent rounded-circle mx-auto mb-1" style="width: 24px; height: 24px;"></div>
        <div class="small text-muted fw-medium">Fresh</div>
      </div>
      <div class="text-center">
        <div class="bg-walnut rounded-circle mx-auto mb-1" style="width: 24px; height: 24px;"></div>
        <div class="small text-muted fw-medium">Artisan</div>
      </div>
    </div>
  </div>
</div>

<style>
.product-card:hover .product-card-hover {
  opacity: 1 !important;
}
</style>
